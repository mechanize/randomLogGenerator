import subprocess

p = subprocess.Popen('ts=$(date +%s%N); '
                     '/usr/bin/time -v '
                     '~/Documents/Bachelorthesis/2017-jager-survey/monpoly/monpoly '
                     '-sig monpolyData/stockscan.sign '
                     '-log logs/13.log '
                     '-formula monpolyData/CustWithoutInjEvents.formula '
                     '-negate; '
                     'tt=$((($(date +%s%N) - $ts)/1000)); '
                     'echo "Time_elapsed: $tt"'
                     , stdout=subprocess.PIPE, stderr=subprocess.PIPE, shell=True)
res = p.communicate()
time, mem = 0, 0
for line in res[0].decode("utf-8").split("\n"):
    args = line.split(": ")
    if args[0].strip() == "Time_elapsed":
        time = int(args[1].strip())

for line in res[1].decode("utf-8").split("\n"):
    args = line.split(": ")
    if args[0].strip() == "Maximum resident set size (kbytes)":
        mem = int(args[1].strip())

print("time: " + str(time))
print("LEL")
print("mem: " + str(mem))
